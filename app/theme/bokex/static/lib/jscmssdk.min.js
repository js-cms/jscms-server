!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).JscmsSdk=t()}(this,function(){"use strict";var n=[{variable:"",type:"css",version:"latst",url:"https://cdn.jsdelivr.net/npm/heyui/themes/index.css"},{variable:"jQuery",type:"js",version:"3.4.1",url:"https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"},{variable:"Vue",type:"js",version:"latest",url:"https://cdn.jsdelivr.net/npm/vue"},{variable:"HeyUI",type:"js",version:"latest",url:"https://cdn.jsdelivr.net/npm/heyui"},{variable:"less",type:"js",version:"3.9.0",url:"https://cdn.jsdelivr.net/npm/less@3.9.0/dist/less.min.js"}];function t(n){var t=n.url,e=void 0===t?"":t,i=n.callback,o=void 0===i?function(){}:i,a=n.id,r=void 0===a?"":a,s=document.createElement("link"),d="onload"in s,l=536>+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/?(\d+).*/i,"$1"),c=3e5;function p(){s.onload=s.onerror=s.onreadystatechange=null,s=null,o()}s.rel="stylesheet",s.type="text/css",s.href=e,void 0!==r&&(s.id=r),document.getElementsByTagName("head")[0].appendChild(s),!l&&d?d?(s.onload=p,s.onerror=function(){p()}):s.onreadystatechange=function(){/loaded|complete/.test(s.readyState)&&p()}:setTimeout(function(){!function n(t,e,i){var o=t.sheet;var a=!1;i+=1;if(i>c)return a=!0,t=null,void e();if(l)o&&(a=!0);else if(o)try{o.cssRules&&(a=!0)}catch(n){"NS_ERROR_DOM_SECURITY_ERR"===n.name&&(a=!0)}setTimeout(function(){a?e():n(t,e,i)},20)}(s,o,0)},1)}function e(n){var t=n.url,e=void 0===t?"":t,i=n.callback,o=void 0===i?function(){}:i,a=n.id,r=void 0===a?"":a,s=n.variable;window[void 0===s?"":s]&&"function"==typeof o&&o();var d=document.getElementsByTagName("head")[0],l=document.createElement("script");l.type="text/javascript",l.src=e,r&&(l.id=r),"function"==typeof o&&(l.onload=l.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||("function"==typeof o&&o(),l.onload=l.onreadystatechange=null)}),d.appendChild(l)}function i(n,t){void 0===n&&(n=""),void 0===t&&(t=function(){})}function o(n,t){void 0===n&&(n=""),void 0===t&&(t="");var e=document.createElement("style");e.type="text/less",t&&(e.id=t);try{e.appendChild(document.createTextNode(n))}catch(t){e.styleSheet.cssText=n}document.getElementsByTagName("head")[0].appendChild(e)}var a={template:'<div class="vue-qrcode">  <Modal v-model="opened" className="">    <div style="padding: 10px; text-align: center;">{{title}}</div>    <div class="vue-qrcode-warp" :style="warpStyle">      <div class="item" v-for="(item, index) in images" :key="index">        <div><img class="vue-qrcode-image" v-show="item.url" :src="item.url" :alt="item.desc"></div>        <span v-show="item.desc">{{item.desc}}</span>      </div>    </div>  </Modal></div>',style:"img.vue-qrcode-image {\n  width: 230px;\n  height: 230px;\n}\n\n.vue-qrcode-warp {\n  text-align: center;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  min-width: 350px;\n}\n\n.vue-qrcode-warp .item {\n  display: inline-block;\n}\n",name:"Qrcode",data:function(){return{baseWidth:240,warpStyle:{width:"230px"},title:"扫一扫",images:[],opened:!1}},methods:{show:function(n){this.title=n.title,this.images=n.images,this.warpStyle.width=n.images.length*this.baseWidth+"px",console.log(this.warpStyle),this.opened=!0}}},r={template:'<div class="jscms-comment">  <div class="comment-input-area">    <div class="comment-top">      <div class="comment-title">参与评论</div>      <div class="comment-total">共<span class="total-number">{{total}}</span>条</div>    </div>    <div class="comment-middle">      <div class="comment-input-warp">        <textarea v-model="content" name="content" id="commentContent" cols="30" rows="10" :placeholder="textarea.placeholder"></textarea>      </div>      <div class="comment-control-warp">        <div class="control-user">          <span class="user-avatar" :style="{\'background-image\': \'url(\'+ user.avatar +\')\'}"></span>          <span class="user-nickname">{{user.nickname}}</span>        </div>        <div class="control-submit">          <span class="input-total">7/1000</span>          <span class="btn-submit" @click="submit">            提交评论          </span>        </div>      </div>    </div>    <div class="comment-tips">      {{textarea.tips}}    </div>  </div>  <div class="comment-content-area">    <div class="comment-top">      <div class="comment-title">评论区</div>    </div>    <div class="comment-list">      <ul>        <li v-for="(item, index) in commentsList" :key="index">          <div class="comment-list-item">            <div class="item-top">              <div class="item-avatar">                <span :style="{\'background-image\': \'url(\'+ item.userId.avatar +\')\'}"></span>              </div>              <div class="item-info">                <span class="nickname">{{item.userId.nickname}}</span>                <span class="time">· 23小时前</span>              </div>              <div class="item-right">                <span class="like-icon normal"></span>                <span class="like-number">{{item.likeTotal}}</span>                <a class="btn-reply" href="">回复</a>              </div>            </div>            <div class="comment-content" v-html="item.htContent"></div>          </div>        </li>      </ul>    </div>  </div></div>',style:'.jscms-comment {\n  @mainColor: #4285f4;\n  @mainDeepColor: #326ac5;\n  @fontColor: #262626;\n\n  .clear() {\n    content: "";\n    display: block;\n    height: 0;\n    clear: both;\n    visibility: hidden;\n  }\n\n  width: 100%;\n  \n  .comment-title {\n    margin-left: 2px;\n    float: left;\n    padding-top: 5px;\n    padding-bottom: 5px;\n    border-bottom: 2px solid @mainColor;\n    font-size: 16px;\n    font-weight: 400;\n    color: @fontColor;\n  }\n\n  .comment-input-area {\n    width: 100%;\n\n    .comment-top {\n      width: 100%;\n      box-sizing: border-box;\n  \n      &::after {\n        .clear()\n      }\n\n      .comment-total {\n        padding-top: 5px;\n        padding-bottom: 5px;\n        float: right;\n        color: #787878;\n      }\n  \n    }\n  \n    .comment-middle {\n      margin-top: 10px;\n      background: rgba(245,247,249,.8);\n      border: 1px solid #ddd;\n      border-radius: 2px;\n  \n      .comment-input-warp {\n        textarea {\n          border: 0;\n          color: #333;\n          flex: 1;\n          font-size: 14px;\n          height: 130px;\n          padding: 10px;\n          resize: none;\n          width: 100%;\n  \n          &:focus {\n            box-shadow: none;\n          }\n        }\n      }\n  \n      .comment-control-warp {\n        height: 50px;\n        line-height: 30px;\n        padding: 10px;\n  \n        .control-user {\n          color: @mainColor;\n          float: left;\n          height: 30px;\n          margin-right: 30px;\n          padding-left: 40px;\n          position: relative;\n  \n          .user-avatar {\n            background: no-repeat 50% #787878;\n            background-size: cover;\n            border-radius: 50%;\n            height: 30px;\n            left: 0;\n            position: absolute;\n            top: 0;\n            width: 30px;\n          }\n        }\n  \n        .control-submit {\n          float: right;\n  \n          .input-total {\n            color: #787878;\n            font-size: 14px;\n            padding-right: 10px;\n            padding-left: 10px;\n          }\n  \n          .btn-submit {\n            background-color: @mainColor;\n            border-radius: 1px;\n            color: #fff;\n            cursor: pointer;\n            float: right;\n            height: 30px;\n            padding: 0 12px;\n            position: relative;\n            user-select: none;\n            transition: all 0.3s;\n  \n            &:hover {\n              background-color: @mainDeepColor;\n            }\n          }\n  \n        }\n      }\n    }\n\n    .comment-tips {\n      font-size: 14px;\n      color: #787878;\n      padding-top: 10px;\n    }\n  }\n\n  .comment-content-area {\n    margin-top: 20px;\n\n    .comment-top {\n      width: 100%;\n      box-sizing: border-box;\n  \n      &::after {\n        .clear()\n      }\n    }\n\n    .comment-list {\n      margin-top: 20px;\n\n      .comment-list-item {\n        position: relative;\n        border-bottom: 1px solid #f5f5f5;\n        margin-bottom: 15px;\n\n        .item-top {\n          &::after {\n            .clear()\n          }\n  \n          .item-avatar {\n            float: left;\n  \n            span {\n              background-color: #eee;\n              background-position: 50%;\n              background-repeat: no-repeat;\n              background-size: cover;\n              border-radius: 50%;\n              display: block;\n              height: 40px;\n              width: 40px;\n            }\n          }\n  \n          .item-info {\n            float: left;\n  \n            .nickname {\n              font-size: 14px;\n              color: @fontColor;\n              margin-left: 10px;\n            }\n  \n            .time {\n              font-size: 12px;\n              color: #a7a7a7;\n            }\n          }\n  \n          .item-right {\n            float: right;\n  \n            .like-icon {\n              background-size: 100%;\n              cursor: pointer;\n              display: inline-block;\n              height: 24px;\n              width: 24px;\n              margin-right: 10px;\n              vertical-align: text-top;\n              background-repeat: no-repeat;\n              position: relative;\n              top: -4px;\n              right: -10px;\n  \n              &.normal {\n                background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA+tJREFUaAXtWN1LFFEUv3dmNl1NUSKIPi0I8qGehMIkMfxICfuCDdLddT999KU/oNegf8BddtfZsrIQsx5SqCSKCjKqV7NNkkjKMDE/cp17O3d1bBjd2Z39oCFmYblzzz3nnt/vzDn3XAYh82dGwIyAGYH/PgK9vb3lwWi0Mh9EcT42Ve4ZCInnKEVRhOhWkA+Vlxadt9lsi0qdbJ7zSiAYFs8QQu8CQIsMEmM8XFZibQUSy7Ism5HLxljLNhAWT0Pk74AOgMfTGKN+pk8pbZqZW+gbGRkRtOzTXcsLAUibZkRRP4DdgjD+IWCu3ud22oDE7QQwis6OffwswnrW/rPeQB2pQDjaBMAGEuARnuEpavB47O8hdcjBA/vsGOHBVRt6CXSvqO31znNKANKmHlFyD0AUQLR/cgJt8Hqdb2VQdXV1K7t3br+IMJpYk9nktUzHnOQhcx4MR08SSu9D6hTCdBZxQqOvo/2NGtjk1HQX6FQwOUb0pXpd7zwnBCAVagkhD8C5FSI/hznhlM/V/loNpjssOhEhV5kcjr93RQVCl1pH7zzrY7Q7FK2BSA5BzhcDrF+Y45r8bvsLNZBgJNpCJAr5TwWog08W3lrtctmm1Hp651kRCISvV1NChlmTgiKdB/DNPpf9mRpEMHLjGJFWHoO8CN7QdwtnOe5ytX1Q62UyT0kgEOpJFJqALaNud1tMdsKuBiROX8HBXgqyBQDf4nc7nsrr8tgduXkIkfhz0NvGZJjD1+B5Q3rJ+soRc/zXzQKi1ElZA9CM+piBhOOdMATWjSVUuQYe8Tx/weuybwAviuKupXicvaEEeGZLCb28vkeKBypJCHpK0O9x+pOp5uQYlQr4UbWDSGSgbGkFDQHkveo1PXOorQ74J8WZ8g3ocabUXT68Zx7FYjVKmZ5nPLc4CMBroZPHWBNMZps3Ap1VVXFwOpvMsZYc6ms/RehEQgfjsJZu3ghoOU21BoeDF+qLHTBxq4B6tPST5paWUT7XVm+p1M18QOoMOByOb1r+DEdgfGKyFa4aOxhojvJ/T70kLAxHAI7ZxJEJ3Xrc42l7kgT3uthQBCKRWxWArJGhoxwOQgpBLWv/DFXEy2TZl27xyrQM8wb0Fq/hCOgtXsMR0Fu8hiLAiheuDQ0MVLrFaygCieKFYx9Apey8MnB5/OdFnGnxygRycozyv6WqUEjM6OI2Hps8qqfzysDlMScEJEl6KG+of1ztVXLn9XrbdW2REwK6PG6izL5kwM3Nm07nVZunJsALR5gRLt7yRWlstXCP5hGXWFPK9T7zEqGlJYVjufrYq9e/qW9GwIyAGQEzAmYEzAhkE4E/wI1f80wVWGMAAAAASUVORK5CYII=);\n              }\n  \n              &.liked {\n                background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAArZJREFUaAXtWE9rE0EUf2+TTXKqtYiioigiUihCEQRBv0CvyWa154IHj9485QP4Bcy1sSZdKl4UpGjNSS0e1PjnIh4KehEFRQvZze7zbWRhLZudWXcrI85CmMn7//vNvBc2APrRDGgGNAOagRwMYA5faVeyrKM+GfOludm72GqNpB0lDA0Jm1wmrmWd9QgHPgV3vMHrDrVaheYsNNhOpFz8GQjgPhFNhToCsL1Xb27stMvzfdcAuPWL80C4zkVPxwtkMEtuo3k9Lsuz3xUAw/ql0wD+Ohe7N6k4ll/1Gs1rSbqsssKbeGjbc+jTBhe5L60YTrxtGjCFjuOn2Yl0hZ4A2fYsjoIHouLHRSHezlt8GKcsQiir51F5yvWDh2y/X+SDCH3z4IElkZ2MvpArRIuLJ1139AiIDomScvEDE+ECs/9VZCujzw2Ar80JZr7PM/KwMCHCVqVcOofd7kehraSBEMCw3myGsSrV8jNcWXkfj8vX5rgbYJ8n/JG4PGnPzH8xS8Z57PXeJun/VCbRA9QLg3ued5mXdjwR/8JekSk+9CHCJ65P9rAx5iMeZuK+ZMBmeXX13kQDVkgASHPPoqMFvmYLWTwCn3Fb1jHul61JfoWO0UlJcsi/Q632Oc1fdQAdXF7+8e8CMH7vuSQgyp4AT63NiuM8Tyo6LlMWAKCY/RDIX5xCcd7S94j4zaxVu+lWv7RqngDRTVHzRuDUBFA2pN/alAMwbt5e70XEsGhVDgC/hkqzH4JTqonHzTszLdW80cmodgIdbLe3o+JkVqUAEJUyXZ8QoDIAuHmfVtduvZRhPW6jDADmMjP7ypwAs//JnNkzfnGKsyuzzzWFEGmNx947mUQTbQwKTNPcyNq8UTwxAAP4XzYAE+BD5BStpuM85n340Y9mQDOgGdAMaAY0A/8lAz8Bc5fA/BF5WqMAAAAASUVORK5CYII=) no-repeat 0;\n              }\n            }\n  \n            .like-number {\n              font-size: 13px;\n              padding-left: 5px;\n              padding-right: 5px;\n              margin-right: 2px;\n              color: #787878;\n            }\n  \n            .btn-reply {\n              color: @mainColor;\n              cursor: pointer;\n            }\n          }\n        }\n\n        .comment-content {\n          position: relative;\n          margin-left: 50px;\n          top: -10px;\n          color: @fontColor;\n\n          p {\n            margin: 0px;\n            padding: 0px;\n          }\n        }\n      }\n    }\n  }\n}',name:"Comment",data:function(){return{article:{id:window.__JSCMS_CONSTANT__.article.id,numberId:window.__JSCMS_CONSTANT__.article.numberId},textarea:{placeholder:"你怎么看...",tips:"请回复有价值的信息，无意义的评论将很快被删除，账号将被禁止发言。"},content:"",user:{_id:"5c9648d94a4cf500067b6770",avatar:__JSCMS_CONSTANT__.CONSTANT.THEME_STATIC+"/images/default-avatar.jpg",nickname:"匿名用户",token:""},commentsList:[],total:0}},mounted:function(){this.loadList()},methods:{loadList:function(){var n=this;window.jQuery.get("http://127.0.0.1:7011/api/front/comment/list?numberId="+this.article.numberId,function(t){n.commentsList=t.data.list,n.total=t.data.total})},submit:function(){var n=this;this.content?$.post("http://127.0.0.1:7011/api/front/comment/create",{userId:this.user._id,articleNumberId:this.article.numberId,mdContent:this.content},function(t){if(0===t.code){var e=t.data;e.userId=n.user,n.commentsList.unshift(e),n.content=""}n.$Message({type:0===t.code?"success":"error",text:t.msg})}):this.$Message({type:"error",text:"评论内容不能为空"})}}};return function(){function s(n){void 0===n&&(n={}),this.loadedCallbacks=[],this.loader={css:t,js:e,vue:i,style:o}}var d=s.prototype;return d._mountApi=function(){var n=this;this.comment={},this.comment.render=function(t){void 0===t&&(t={});var e=document.querySelector(t.selector);e.innerHTML="";var i=n._createDiv("",e);return n._initVue({component:r,selector:"#"+i.id,id:n._id()})},this.dialog={};var t=this._createDiv();this.dialog.qrcode=this._initVue({component:a,selector:"#"+t.id,id:t.id})},d._createDiv=function(n,t){void 0===n&&(n=""),void 0===t&&(t=document.body);var e=document.createElement("div");return e.id=n||this._id(),t.appendChild(e),e},d._id=function(){return"id_"+Math.random().toString(36).substr(2)},d._initVue=function(n){var t=n.component,e=n.selector;o(t.style,"vueStyle_"+n.id);var i=new Vue(Object.assign({el:e},t));return window.less.refresh(),i},d.init=function(o){var a=this;"function"==typeof o&&this.loadedCallbacks.push(o),function(n,o){void 0===o&&(o=function(){});var a="string"==typeof n?[n]:n,r=a.length;a.forEach(function(n){var a=n.variable,s=n.url,d=n.after||function(){},l=function(n,t){};switch(n.type){case"css":l=t;break;case"vue":l=i;break;default:l=e}l({url:s,variable:a,callback:function(){--r>0||(d(),o())}})})}(n,function(){a._mountApi(),a.loadedCallbacks.forEach(function(n){return n.call(a)})})},d.loaded=function(n){"function"==typeof n&&this.loadedCallbacks.push(n)},s}()});
