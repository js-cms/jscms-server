(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f25b"],{"069f":function(e,t,n){},1199:function(e,t,n){"use strict";var a=n("069f"),i=n.n(a);i.a},3179:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("d2-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("template",{slot:"header"},[e._v("菜单配置")]),n("div",{staticClass:"form"},[n("el-dialog",{attrs:{title:(1===e.dialogMenu.type?"新建":"修改")+"菜单",visible:e.dialogMenu.isShow,width:"600px"},on:{"update:visible":function(t){e.$set(e.dialogMenu,"isShow",t)}}},[n("div",{staticClass:"pop-body"},[n("el-form",{attrs:{model:e.dialogMenu.menu,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"菜单顺序"}},[n("el-input",{attrs:{placeholder:"输入菜单顺序，值越小越靠前"},model:{value:e.dialogMenu.menu.order,callback:function(t){e.$set(e.dialogMenu.menu,"order",t)},expression:"dialogMenu.menu.order"}})],1),n("el-form-item",{attrs:{label:"菜单名称"}},[n("el-input",{attrs:{placeholder:"输入菜单名称"},model:{value:e.dialogMenu.menu.name,callback:function(t){e.$set(e.dialogMenu.menu,"name",t)},expression:"dialogMenu.menu.name"}})],1),n("el-form-item",{attrs:{label:"菜单别名"}},[n("el-input",{attrs:{placeholder:"输入菜单别名"},model:{value:e.dialogMenu.menu.alias,callback:function(t){e.$set(e.dialogMenu.menu,"alias",t)},expression:"dialogMenu.menu.alias"}})],1),n("el-form-item",{attrs:{label:"菜单链接"}},[n("el-input",{attrs:{placeholder:"输入菜单链接"},model:{value:e.dialogMenu.menu.link,callback:function(t){e.$set(e.dialogMenu.menu,"link",t)},expression:"dialogMenu.menu.link"}})],1),n("el-form-item",{attrs:{label:"高亮匹配"}},[n("el-input",{attrs:{placeholder:"高亮匹配的链接，英文逗号分割，如：@/index.html"},model:{value:e.dialogMenu.menu.activeUrl,callback:function(t){e.$set(e.dialogMenu.menu,"activeUrl",t)},expression:"dialogMenu.menu.activeUrl"}})],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogMenu.isShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogMenuHandleCertain()}}},[e._v("确 定")])],1)])],1),n("div",{staticClass:"list-warp"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[n("el-table-column",{attrs:{prop:"order",label:"菜单顺序",width:"180"}}),n("el-table-column",{attrs:{prop:"name",label:"菜单名称",width:"180"}}),n("el-table-column",{attrs:{prop:"alias",label:"菜单别名"}}),n("el-table-column",{attrs:{prop:"link",label:"菜单链接"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.showChangeMenuDialog(2,t.row)}}},[e._v("编辑")]),n("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(n){e.deleteMenu(t.$index)}}},[e._v("删除")])]}}])})],1)],1),n("template",{slot:"footer"},[n("el-button",{attrs:{type:"success"},on:{click:function(t){e.saveData()}}},[e._v("保存全部更改")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showChangeMenuDialog()}}},[e._v("新增一个菜单")])],1)],2)},i=[],l=(n("b54a"),n("7f7f"),n("96cf"),n("3040")),o=n("c665"),s=n("0c6d"),r=function e(){Object(o["a"])(this,e),this.order=0,this.name="",this.alias="",this.link="",this.activeUrl=""},u={name:"menuList",data:function(){return{id:"",loading:!0,list:[],dialogMenu:{type:1,isShow:!1,menu:{}}}},mounted:function(){this.getData()},methods:{showChangeMenuDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;this.dialogMenu.type=e,this.dialogMenu.isShow=!0,this.dialogMenu.menu=1===e?new r:t},deleteMenu:function(e){var t=this;this.$confirm("确定要删除该菜单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){1===t.list.length?t.$message.error("请至少保留一个菜单"):t.list.splice(e,1)})},getData:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["b"].get("/api/config?alias=menu");case 2:t=e.sent,this.list=t.data.data.info,this.id=t.data.data._id,this.loaded();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),saveData:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["b"].post("/api/config",{id:this.id,info:this.list});case 2:t=e.sent,0===t.data.code&&this.$message({message:"保存成功",type:"success"});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),dialogMenuFormCheck:function(){return""===this.dialogMenu.menu.name?(this.$message.error("菜单名称必填"),!1):""===this.dialogMenu.menu.alias?(this.$message.error("菜单别名必填"),!1):""!==this.dialogMenu.menu.link||(this.$message.error("菜单链接必填"),!1)},dialogMenuHandleCertain:function(){var e=this.dialogMenuFormCheck();!1!==e&&(1===this.dialogMenu.type&&this.list.push(this.dialogMenu.menu),this.dialogMenu.isShow=!1)},loaded:function(){var e=this;setTimeout(function(){e.loading=!1},1e3)}}},c=u,d=(n("1199"),n("2877")),m=Object(d["a"])(c,a,i,!1,null,"6fe8a8a5",null);m.options.__file="index.vue";t["default"]=m.exports},c665:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return a})}}]);
//# sourceMappingURL=chunk-f25b.2f9c5054.js.map