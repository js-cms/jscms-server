{"version":3,"sources":["webpack:///./src/pages/resource/image.vue?e975","webpack:///src/pages/resource/image.vue","webpack:///./src/pages/resource/image.vue?f695","webpack:///./src/pages/resource/image.vue","webpack:///./src/pages/resource/image.vue?7124"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","slot","_v","staticClass","_l","item","index","key","attrs","span","body-style","padding","src","url","preview","staticStyle","_s","remarks","createTime","float","on","command","handleDropdownCommand","background","layout","current-page","page","pageNumber","page-size","pageSize","total","totalCount","current-change","onPageChange","action","uploadUrl","on-preview","handlePreview","on-success","handleUploadSuccess","multiple","file-list","fileList","size","type","staticRenderFns","imagevue_type_script_lang_js_","data","loading","moment","moment_default","a","currentDate","Date","getTime","resourceList","request","mounted","getData","methods","_getData","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","res","list","wrap","_context","prev","next","get","concat","sent","forEach","format","updateTime","loaded","stop","apply","arguments","submitUpload","$refs","upload","submit","handleRemove","file","console","log","showUrl","deleteResource","$prompt","confirmButtonText","cancelButtonText","inputValue","then","_ref","catch","_this","$confirm","_callee2","_context2","post","id","_id","fileName","code","$message","message","splice","$index","error","msg","num","filter","_this2","setTimeout","resource_imagevue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_image_vue_vue_type_style_index_0_id_1e77f00a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_image_vue_vue_type_style_index_0_id_1e77f00a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-4ece.95e0c242.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('d2-container',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('template',{slot:\"header\"},[_vm._v(\"图片管理\")]),_c('div',{staticClass:\"list\"},[_c('el-row',_vm._l((_vm.resourceList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":6}},[_c('el-card',{staticClass:\"card-box\",attrs:{\"body-style\":{ padding: '0px' }}},[_c('img',{staticClass:\"image\",attrs:{\"src\":item.url,\"preview\":index}}),_c('div',{staticStyle:{\"padding\":\"14px\"}},[_c('span',[_vm._v(_vm._s(item.remarks))]),_c('div',{staticClass:\"bottom clearfix\"},[_c('time',{staticClass:\"time\"},[_vm._v(_vm._s(item.createTime))]),_c('el-dropdown',{staticStyle:{\"float\":\"right\"},on:{\"command\":_vm.handleDropdownCommand}},[_c('span',{staticClass:\"el-dropdown-link\"},[_vm._v(\"下拉菜单\\n                  \"),_c('i',{staticClass:\"el-icon-arrow-down el-icon--right\"})]),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":[1,item]}},[_vm._v(\"查看链接\")]),_c('el-dropdown-item',{attrs:{\"command\":[2,item]}},[_vm._v(\"删除\")])],1)],1)],1)])])],1)})),_c('el-row',[_c('div',{staticClass:\"pagination-warp\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"current-page\":_vm.page.pageNumber,\"page-size\":_vm.page.pageSize,\"total\":_vm.page.totalCount},on:{\"current-change\":_vm.onPageChange}})],1)])],1),_c('template',{slot:\"footer\"},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":_vm.uploadUrl,\"on-preview\":_vm.handlePreview,\"on-success\":_vm.handleUploadSuccess,\"multiple\":\"\",\"file-list\":_vm.fileList}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件，且不超过500kb\")])],1)],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <d2-container v-loading=\"loading\">\n    <template slot=\"header\">图片管理</template>\n    <div class=\"list\">\n      <el-row>\n        <el-col :span=\"6\" v-for=\"(item, index) in resourceList\" :key=\"index\">\n          <el-card class=\"card-box\" :body-style=\"{ padding: '0px' }\">\n            <img :src=\"item.url\" class=\"image\" :preview=\"index\">\n            <div style=\"padding: 14px;\">\n              <span>{{item.remarks}}</span>\n              <div class=\"bottom clearfix\">\n                <time class=\"time\">{{item.createTime}}</time>\n                <el-dropdown @command=\"handleDropdownCommand\" style=\"float:right;\">\n                  <span class=\"el-dropdown-link\">下拉菜单\n                    <i class=\"el-icon-arrow-down el-icon--right\"></i>\n                  </span>\n                  <el-dropdown-menu slot=\"dropdown\">\n                    <el-dropdown-item :command=\"[1,item]\">查看链接</el-dropdown-item>\n                    <el-dropdown-item :command=\"[2,item]\">删除</el-dropdown-item>\n                  </el-dropdown-menu>\n                </el-dropdown>\n              </div>\n            </div>\n          </el-card>\n        </el-col>\n      </el-row>\n      <el-row>\n        <div class=\"pagination-warp\">\n          <el-pagination\n            background\n            layout=\"prev, pager, next\"\n            :current-page=\"page.pageNumber\"\n            :page-size=\"page.pageSize\"\n            @current-change=\"onPageChange\"\n            :total=\"page.totalCount\"\n          ></el-pagination>\n        </div>\n      </el-row>\n    </div>\n    <template slot=\"footer\">\n      <el-upload\n        class=\"upload-demo\"\n        :action=\"uploadUrl\"\n        :on-preview=\"handlePreview\"\n        :on-success=\"handleUploadSuccess\"\n        multiple\n        :file-list=\"fileList\"\n      >\n        <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n        <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div>\n      </el-upload>\n    </template>\n  </d2-container>\n</template>\n\n<script>\nimport { req, baseURL } from \"@/api/request\";\nimport moment from \"moment\";\n\nexport default {\n  name: \"resourceImage\",\n  data() {\n    return {\n      loading: true,\n      moment: moment,\n      currentDate: new Date().getTime(),\n      resourceList: [],\n      fileList: [],\n      page: {\n        pageSize: 8,\n        pageNumber: 1,\n        totalCount: 100\n      },\n      uploadUrl: baseURL + \"api/resource/uploader\"\n    };\n  },\n  mounted() {\n    this.getData();\n  },\n  methods: {\n    async getData() {\n      let res = await req.get(\n        `/api/resource/list?type=1&pageSize=${this.page.pageSize}&pageNumber=${this.page.pageNumber - 1}`\n      );\n      let list = res.data.data.list;\n      this.page.totalCount = res.data.data.total;\n      list.forEach(item => {\n        item.createTime = moment(item.createTime).format(\"YYYY-MM-DD HH:mm\");\n        item.updateTime = moment(item.updateTime).format(\"YYYY-MM-DD HH:mm\");\n      });\n      this.resourceList = list;\n      this.loaded();\n    },\n    submitUpload() {\n      this.loading = true;\n      this.$refs.upload.submit();\n    },\n    handleRemove(file, fileList) {\n      console.log(file, fileList);\n    },\n    handlePreview(file) {\n      console.log(file);\n    },\n    handleUploadSuccess() {\n      this.getData();\n      this.loading = false;\n    },\n    handleDropdownCommand(command) {\n      let type = command[0];\n      let item = command[1];\n      switch (type) {\n        case 1:\n          this.showUrl(item.url);\n          break;\n        case 2:\n          this.deleteResource(item);\n          break;\n      }\n    },\n    showUrl(url) {\n      this.$prompt(\"请自行复制\", \"资源链接\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        inputValue: url\n      })\n        .then(({ value }) => {})\n        .catch(() => {});\n    },\n    deleteResource(item) {\n      this.$confirm(\"此操作将永久删除该资源, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(async () => {\n        let res = await req.post(\"/api/resource/delete\", {\n          id: item._id,\n          fileName: item.remarks\n        });\n        if (res.data.code === 0) {\n          this.$message({\n            type: \"success\",\n            message: \"删除成功!\"\n          });\n          this.resourceList.splice(this.resourceList.$index, 1);\n        } else {\n          this.$message.error(res.data.msg);\n        }\n      });\n    },\n\n    onPageChange(num) {\n      this.page.pageNumber = num;\n      this.getData(this.filter);\n    },\n\n    loaded() {\n      setTimeout(()=>{\n        this.loading = false;\n      }, 1000);\n    }\n  }\n};\n</script>\n<style scoped>\n.card-box {\n  margin: 20px;\n}\n\n.card-box .image {\n  height: 14vw;\n  object-fit: cover;\n}\n\n.time {\n  font-size: 13px;\n  color: #999;\n}\n\n.bottom {\n  margin-top: 13px;\n  line-height: 12px;\n}\n\n.button {\n  padding: 0;\n  float: right;\n}\n\n.image {\n  width: 100%;\n  display: block;\n}\n\n.clearfix:before,\n.clearfix:after {\n  display: table;\n  content: \"\";\n}\n\n.clearfix:after {\n  clear: both;\n}\n\n.pagination-warp {\n  padding: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./image.vue?vue&type=template&id=1e77f00a&scoped=true&\"\nimport script from \"./image.vue?vue&type=script&lang=js&\"\nexport * from \"./image.vue?vue&type=script&lang=js&\"\nimport style0 from \"./image.vue?vue&type=style&index=0&id=1e77f00a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e77f00a\",\n  null\n  \n)\n\ncomponent.options.__file = \"image.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image.vue?vue&type=style&index=0&id=1e77f00a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image.vue?vue&type=style&index=0&id=1e77f00a&scoped=true&lang=css&\""],"sourceRoot":""}