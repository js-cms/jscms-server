(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ece"],{"4c10":function(e,t,a){},a15d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("template",{slot:"header"},[e._v("图片管理")]),a("div",{staticClass:"list"},[a("el-row",e._l(e.resourceList,function(t,n){return a("el-col",{key:n,attrs:{span:6}},[a("el-card",{staticClass:"card-box",attrs:{"body-style":{padding:"0px"}}},[a("img",{staticClass:"image",attrs:{src:t.url,preview:n}}),a("div",{staticStyle:{padding:"14px"}},[a("span",[e._v(e._s(t.remarks))]),a("div",{staticClass:"bottom clearfix"},[a("time",{staticClass:"time"},[e._v(e._s(t.createTime))]),a("el-dropdown",{staticStyle:{float:"right"},on:{command:e.handleDropdownCommand}},[a("span",{staticClass:"el-dropdown-link"},[e._v("下拉菜单\n                  "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:[1,t]}},[e._v("查看链接")]),a("el-dropdown-item",{attrs:{command:[2,t]}},[e._v("删除")])],1)],1)],1)])])],1)})),a("el-row",[a("div",{staticClass:"pagination-warp"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.page.pageNumber,"page-size":e.page.pageSize,total:e.page.totalCount},on:{"current-change":e.onPageChange}})],1)])],1),a("template",{slot:"footer"},[a("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadUrl,"on-preview":e.handlePreview,"on-success":e.handleUploadSuccess,multiple:"","file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],2)},i=[],o=(a("ac6a"),a("96cf"),a("3040")),s=a("0c6d"),r=a("c1df"),c=a.n(r),l={name:"resourceImage",data:function(){return{loading:!0,moment:c.a,currentDate:(new Date).getTime(),resourceList:[],fileList:[],page:{pageSize:8,pageNumber:1,totalCount:100},uploadUrl:s["a"]+"api/resource/uploader"}},mounted:function(){this.getData()},methods:{getData:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["b"].get("/api/resource/list?type=1&pageSize=".concat(this.page.pageSize,"&pageNumber=").concat(this.page.pageNumber-1));case 2:t=e.sent,a=t.data.data.list,this.page.totalCount=t.data.data.total,a.forEach(function(e){e.createTime=c()(e.createTime).format("YYYY-MM-DD HH:mm"),e.updateTime=c()(e.updateTime).format("YYYY-MM-DD HH:mm")}),this.resourceList=a,this.loaded();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),submitUpload:function(){this.loading=!0,this.$refs.upload.submit()},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleUploadSuccess:function(){this.getData(),this.loading=!1},handleDropdownCommand:function(e){var t=e[0],a=e[1];switch(t){case 1:this.showUrl(a.url);break;case 2:this.deleteResource(a);break}},showUrl:function(e){this.$prompt("请自行复制","资源链接",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:e}).then(function(e){e.value}).catch(function(){})},deleteResource:function(e){var t=this;this.$confirm("此操作将永久删除该资源, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark(function a(){var n;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s["b"].post("/api/resource/delete",{id:e._id,fileName:e.remarks});case 2:n=a.sent,0===n.data.code?(t.$message({type:"success",message:"删除成功!"}),t.resourceList.splice(t.resourceList.$index,1)):t.$message.error(n.data.msg);case 4:case"end":return a.stop()}},a,this)})))},onPageChange:function(e){this.page.pageNumber=e,this.getData(this.filter)},loaded:function(){var e=this;setTimeout(function(){e.loading=!1},1e3)}}},u=l,d=(a("dd82"),a("2877")),p=Object(d["a"])(u,n,i,!1,null,"1e77f00a",null);p.options.__file="image.vue";t["default"]=p.exports},dd82:function(e,t,a){"use strict";var n=a("4c10"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-4ece.95e0c242.js.map