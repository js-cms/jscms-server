{"version":3,"sources":["webpack:///./src/pages/search/list.vue?9a2c","webpack:///src/pages/search/list.vue","webpack:///./src/pages/search/list.vue?cbdf","webpack:///./src/pages/search/list.vue","webpack:///./src/pages/search/list.vue?d4a5"],"names":["render","_vm","this","_h","$createElement","_c","_self","slot","_v","staticClass","staticStyle","width","attrs","data","list","prop","label","fixed","scopedSlots","_u","key","fn","scope","type","size","on","click","$event","viewWeb","row","color","deleteSearch","background","layout","current-page","page","pageNumber","total","totalCount","current-change","onPageChange","staticRenderFns","listvue_type_script_lang_js_","name","loading","moment","moment_default","a","pageSize","mounted","getData","methods","_deleteSearch","Object","asyncToGenerator","regeneratorRuntime","mark","_callee2","_this","wrap","_context2","prev","next","console","log","$confirm","confirmButtonText","cancelButtonText","then","_callee","res","_context","request","post","id","_id","sent","code","$message","message","splice","$index","error","msg","stop","catch","_x","apply","arguments","_getData","_callee3","filter","url","newList","_context3","concat","get","forEach","info","item","keyword","params","s","_params","JSON","stringify","_updateTime","updateTime","format","push","loaded","_x2","window","open","num","_this2","setTimeout","search_listvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_list_vue_vue_type_style_index_0_id_62294428_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_list_vue_vue_type_style_index_0_id_62294428_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-0912.3250a141.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('d2-container',[_c('template',{slot:\"header\"},[_c('div',[_vm._v(\"搜索记录\")])]),_c('div',{staticClass:\"list-warp\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list}},[_c('el-table-column',{attrs:{\"prop\":\"keyword\",\"label\":\"关键词\"}}),_c('el-table-column',{attrs:{\"prop\":\"searcherIp\",\"label\":\"搜索ip\"}}),_c('el-table-column',{attrs:{\"prop\":\"_params\",\"label\":\"请求参数\"}}),_c('el-table-column',{attrs:{\"prop\":\"searcherReferer\",\"label\":\"搜索来源\"}}),_c('el-table-column',{attrs:{\"prop\":\"searcherUserAgent\",\"label\":\"搜索环境\",\"width\":\"400\"}}),_c('el-table-column',{attrs:{\"prop\":\"_updateTime\",\"label\":\"搜索时间\"}}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.viewWeb(scope.row)}}},[_vm._v(\"查看\")]),_c('el-button',{staticStyle:{\"color\":\"red\"},attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){_vm.deleteSearch(scope)}}},[_vm._v(\"删除\")])]}}])})],1),_c('div',{staticClass:\"pagination-warp\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"current-page\":_vm.page.pageNumber,\"total\":_vm.page.totalCount},on:{\"current-change\":_vm.onPageChange}})],1)],1),_c('template',{slot:\"footer\"})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template v-loading=\"loading\">\n  <d2-container>\n    <template slot=\"header\">\n      <div>搜索记录</div>\n    </template>\n    <div class=\"list-warp\">\n    <el-table\n      :data=\"list\"\n      style=\"width: 100%\">\n      <el-table-column\n        prop=\"keyword\"\n        label=\"关键词\"\n      >\n      </el-table-column>\n      <el-table-column\n        prop=\"searcherIp\"\n        label=\"搜索ip\">\n      </el-table-column>\n      <el-table-column\n        prop=\"_params\"\n        label=\"请求参数\"\n      >\n      </el-table-column>\n      <el-table-column\n        prop=\"searcherReferer\"\n        label=\"搜索来源\"\n      >\n      </el-table-column>\n      <el-table-column\n        prop=\"searcherUserAgent\"\n        label=\"搜索环境\"\n        width=\"400\"\n      >\n      </el-table-column>\n      <el-table-column\n        prop=\"_updateTime\"\n        label=\"搜索时间\"\n      >\n      </el-table-column>\n      <el-table-column\n        fixed=\"right\"\n        label=\"操作\"\n        width=\"100\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" size=\"small\" @click=\"viewWeb(scope.row)\">查看</el-button>\n          <el-button type=\"text\" size=\"small\" style=\"color: red\" @click=\"deleteSearch(scope)\" >删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div class=\"pagination-warp\">\n      <el-pagination\n        background\n        layout=\"prev, pager, next\"\n        :current-page=\"page.pageNumber\"\n        @current-change=\"onPageChange\"\n        :total=\"page.totalCount\">\n      </el-pagination>\n    </div>\n    </div>\n    <template slot=\"footer\">\n    </template>\n  </d2-container>\n</template>\n\n<script>\nimport { req, baseURL } from \"@/api/request\";\nimport moment from \"moment\";\n\nexport default {\n  name: \"articleList\",\n  data() {\n    return {\n      loading: true,\n      moment: moment,\n      list: [],\n      page: {\n        pageSize: 10,\n        pageNumber: 1,\n        totalCount: 100\n      }\n    };\n  },\n  mounted() {\n    this.getData();\n  },\n  methods: {\n\n    async deleteSearch(scope) {\n      console.log(scope);\n      this.$confirm(\"此操作将永久删除该搜索记录, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(async () => {\n          let res = await req.post(\"/api/log/delete\", {\n            id: scope.row._id\n          });\n          if (res.data.code === 0) {\n            this.$message({\n              type: \"success\",\n              message: \"删除成功!\"\n            });\n            this.list.splice(scope.$index, 1);\n          } else {\n            this.$message.error(res.data.msg);\n          }\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消删除\"\n          });\n        });\n    },\n\n    async getData(filter) {\n      let url = \"/api/log/list\";\n      url = url + `?type=2&pageSize=${this.page.pageSize}&pageNumber=${this.page.pageNumber - 1}`;\n      let res = await req.get(url);\n      this.page.totalCount = res.data.data.total;\n      let list = res.data.data.list;\n      let newList = [];\n      list.forEach(info => {\n        let item = info.info;\n        item.keyword = item.params.s;\n        item._params = JSON.stringify(item.params);\n        item._updateTime = moment(item.updateTime).format(\"YYYY-MM-DD HH:mm\");\n        item._id = info._id;\n        newList.push(item);\n      });\n      this.list = newList;\n      this.loaded();\n    },\n\n    // 查看前台\n    viewWeb(item) {\n      window.open(`${baseURL}s?s=${item.keyword}`);\n    },\n\n    onPageChange(num) {\n      this.page.pageNumber = num;\n      this.getData();\n    },\n\n    loaded() {\n      setTimeout(()=>{\n        this.loading = false;\n      }, 1000);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.tools {\n  margin-top: 15px;\n}\n\n.pagination-warp {\n  padding: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=62294428&scoped=true&v-loading=loading&\"\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&id=62294428&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62294428\",\n  null\n  \n)\n\ncomponent.options.__file = \"list.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&id=62294428&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&id=62294428&scoped=true&lang=css&\""],"sourceRoot":""}