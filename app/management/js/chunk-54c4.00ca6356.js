(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54c4"],{"4a58":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("d2-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("template",{slot:"header"},[t._v("分类列表")]),a("el-dialog",{attrs:{title:(1===t.catDialog.type?"新建":"修改")+"分类",visible:t.catDialog.isShow,width:"600px","before-close":t.catDialogHandleClose},on:{"update:visible":function(e){t.$set(t.catDialog,"isShow",e)}}},[a("div",{staticClass:"pop-body"},[a("el-form",{staticClass:"catDialog-form",attrs:{model:t.catDialog.data,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"排序序号",prop:"order"}},[a("el-input",{model:{value:t.catDialog.data.order,callback:function(e){t.$set(t.catDialog.data,"order",e)},expression:"catDialog.data.order"}})],1),a("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[a("el-input",{model:{value:t.catDialog.data.name,callback:function(e){t.$set(t.catDialog.data,"name",e)},expression:"catDialog.data.name"}})],1),a("el-form-item",{attrs:{label:"分类别名",prop:"alias"}},[a("el-input",{model:{value:t.catDialog.data.alias,callback:function(e){t.$set(t.catDialog.data,"alias",e)},expression:"catDialog.data.alias"}})],1),a("el-form-item",{attrs:{label:"网页标题",prop:"title"}},[a("el-input",{model:{value:t.catDialog.data.title,callback:function(e){t.$set(t.catDialog.data,"title",e)},expression:"catDialog.data.title"}})],1),a("el-form-item",{attrs:{label:"网页关键字",prop:"keywords"}},[a("el-input",{model:{value:t.catDialog.data.keywords,callback:function(e){t.$set(t.catDialog.data,"keywords",e)},expression:"catDialog.data.keywords"}})],1),a("el-form-item",{attrs:{label:"网页描述",prop:"description"}},[a("el-input",{model:{value:t.catDialog.data.description,callback:function(e){t.$set(t.catDialog.data,"description",e)},expression:"catDialog.data.description"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.catDialogHandleClose}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.catDialogHandleCertain()}}},[t._v("确 定")])],1)]),a("div",{staticClass:"list-warp"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{prop:"order",label:"排序序号",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"类名",width:"180"}}),a("el-table-column",{attrs:{prop:"alias",label:"别名"}}),a("el-table-column",{attrs:{prop:"articleCount",label:"文章数量"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.viewWeb(e.row)}}},[t._v("查看")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.changeCategory(e.row)}}},[t._v("编辑")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteCategory(e)}}},[t._v("删除")])]}}])})],1)],1),a("template",{slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.newCategory()}}},[t._v("新增分类")])],1)],2)},i=[],n=a("6bde"),r=(a("ac6a"),a("96cf"),a("3040")),l=a("c665"),s=a("0c6d"),c=a("c1df"),u=a.n(c),p=function t(){Object(l["a"])(this,t),this.order=0,this.name="",this.alias="",this.title="",this.keywords="",this.description=""},d={name:"categoryList",data:function(){return{loading:!0,moment:u.a,catDialog:{type:1,isShow:!1,data:{}},list:[new p]}},mounted:function(){this.getData()},methods:{newCategory:function(){this.catDialog.data=new p,this.catDialog.type=1,this.catDialog.isShow=!0},changeCategory:function(t){this.catDialog.data=t,this.catDialog.type=2,this.catDialog.isShow=!0},deleteCategory:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log(e),this.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark(function t(){var o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["b"].post("/api/category/delete",{id:e.row._id});case 2:o=t.sent,0===o.data.code?(a.$message({type:"success",message:"删除成功!"}),a.list.splice(e.$index,1)):a.$message.error(o.data.msg);case 4:case"end":return t.stop()}},t,this)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["b"].get("/api/category/list");case 2:e=t.sent,a=e.data.data,a.forEach(function(t){t.createTime=u()(t.createTime).format("YYYY-MM-DD HH:mm"),t.updateTime=u()(t.updateTime).format("YYYY-MM-DD HH:mm")}),this.list=e.data.data,this.loaded();case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),saveData:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["b"].post("/api/config",this.configObj);case 2:e=t.sent,0===e.data.code&&this.$message({message:"保存成功",type:"success"});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),catDialogHandleClose:function(){var t=this;this.$confirm("确认关闭？").then(function(e){t.catDialog.isShow=!1}).catch(function(t){})},catDialogHandleCertain:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e={},1!==this.catDialog.type){t.next=7;break}return t.next=4,s["b"].post("/api/category/create",this.catDialog.data);case 4:e=t.sent,t.next=11;break;case 7:if(2!==this.catDialog.type){t.next=11;break}return t.next=10,s["b"].post("/api/category/update",this.catDialog.data);case 10:e=t.sent;case 11:a=e.data.msg,1===e.data.code?"object"===Object(n["a"])(a)?this.$message.error(JSON.stringify(a)):this.$message.error(a):(this.$message.success(a),this.catDialog.data={},this.catDialog.isShow=!1,this.getData());case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),viewWeb:function(t){window.open(s["a"]+t.alias+".html")},loaded:function(){var t=this;setTimeout(function(){t.loading=!1},1e3)}}},m=d,f=a("2877"),g=Object(f["a"])(m,o,i,!1,null,null,null);g.options.__file="list.vue";e["default"]=g.exports},"6bde":function(t,e,a){"use strict";function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t){return i="function"===typeof Symbol&&"symbol"===o(Symbol.iterator)?function(t){return o(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":o(t)},i(t)}a.d(e,"a",function(){return i})},c665:function(t,e,a){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}a.d(e,"a",function(){return o})}}]);
//# sourceMappingURL=chunk-54c4.00ca6356.js.map